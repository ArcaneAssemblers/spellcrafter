start:
  # - play mysterious:
  - scene: manageSpell
  - deuzi says: A spell demands a sacrifice. Will you pay the price to begin?
  - show tower: WITH FADE CONTINUE
  - show deuzi: happy AT CENTER WITH FADE
  - choice:
    - "I accept":
      - deuzi says happy: One moment while your sacrifice is received..
      - wait: 1000
      - deuzi says happy: A spark of magic springs to life. You're ready to begin!
      - hide deuzi: WITH FADE
      - scene: manageSpell
    - "What does this mean?":
      - deuzi says: No time to explain. GTFO
      - scene: endGame

manageSpell:
  - show bench: WTTH FADE
  - text: The current spell power is {power}, and its chaos is {chaos}. You have {barriers} barriers remaining
  - choice:
    - text: What would you like to do?
    - Forage:
      - choice:
        - text: Where would you like to visit?
        - Forest:
          - text: You head out to the snowy forest. It's cold, but you're prepared.
          - var foraging: forest
        - Meadow:
          - text: You leave the tower for the meadow. It is beautiful and sunny.
          - var foraging: meadow
        - Volcano:
          - text: You begin hiking toward the volcano. Lucky you know a heat shielding spell.
          - var foraging: volcano
        - Cave:
          - text: You begin your journey to the cave. Don't forget the lantern.
          - var foraging: cave
      - scene: leavingTower

    - Study:
      - choice:
        - text: What would you like to study?
        - The void:

    - Summon Familiar:
      - deuzi says: You are not experienced enough to summon a familiar yet

    - Add Components:
      - if ({itemCount} > 0):
        - call SpellCrafter: showItemsChoice
      - else:
        - deuzi says angry: You don't have any components to add!!
        - hide deuzi: WITH FADE
      - scene: manageSpell

leavingTower:
  - show outside: WITH FADE
  - show deuzi: normal AT CENTER WITH FADE
  - deuzi says: I'll guard the tower while you're away.
  - hide deuzi: WITH FADE
  - text: "It will take 5:00 minutes to forage in the {foraging}"
  - if ({foraging} == "forest"):
      - scene: forest
  - if ({foraging} == "meadow"):
      - scene: meadow
  - if ({foraging} == "volcano"):
      - scene: volcano
  - if ({foraging} == "cave"):
      - scene: cave

forest:
  - show forest: WITH FADE
  - text: "You forage in the forest for several hours"
  - wait: 1000
  - call SpellCrafter: forage forest
  - text: You found 1 {lastForagedItemName}! {lastForagedItemDescription}.
  - text: Time to return to the tower.
  - scene: manageSpell

meadow:
  - show forest: WITH FADE
  - text: "You forage in the meadow for several hours"
  - wait: 1000
  - call SpellCrafter: forage meadow
  - text: You found 1 {lastForagedItemName}! {lastForagedItemDescription}.
  - text: Time to return to the tower.
  - scene: manageSpell

volcano:
  - show forest: WITH FADE
  - text: "You forage in the volcano for several hours"
  - wait: 1000
  - call SpellCrafter: forage volcano
  - text: You found 1 {lastForagedItemName}! {lastForagedItemDescription}.
  - text: Time to return to the tower.
  - scene: manageSpell

cave:
  - show forest: WITH FADE
  - text: "You forage in the cave for several hours"
  - wait: 1000
  - call SpellCrafter: forage cave
  - text: You found 1 {lastForagedItemName}! {lastForagedItemDescription}.
  - text: Time to return to the tower.
  - scene: manageSpell

endGame:
  - deuzi says normal: Game over!
  - hide ALL:
